<?xml version="1.0" encoding="utf-8"?>
<!--
////////////////////////////////////////////////////////////////////////////////
//
//  Copyright (C) STARTcloud, Inc. 2015-2022. All rights reserved.
//
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the Server Side Public License, version 1,
//  as published by MongoDB, Inc.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
//  Server Side Public License for more details.
//
//  You should have received a copy of the Server Side Public License
//  along with this program. If not, see
//
//  http://www.mongodb.com/licensing/server-side-public-license
//
//  As a special exception, the copyright holders give permission to link the
//  code of portions of this program with the OpenSSL library under certain
//  conditions as described in each individual source file and distribute
//  linked combinations including the program with the OpenSSL library. You
//  must comply with the Server Side Public License in all respects for
//  all of the code used other than as permitted herein. If you modify file(s)
//  with this exception, you may extend this exception to your version of the
//  file(s), but you are not obligated to do so. If you do not wish to do so,
//  delete this exception statement from your version. If you delete this
//  exception statement from all source files in the program, then also delete
//  it in the license file.
//
////////////////////////////////////////////////////////////////////////////////
-->
<s:VGroup 
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    creationComplete="onCreationComplete(event)"
    top="10" includeInLayout="false" visible="false">
								<s:FormItem  skinClass="skins.FormItemSkin" width="100%">
									<s:Label text="Viwe Name:" width="100%" />
									 <s:TextInput id="viewNameInput"
                                            text="{this.viewObject.viewName}"  width="100" maxChars="100" 
											editable="false"
                                            enter="viewNameInput_changeHandler(event)" focusOut="viewNameInput_changeHandler(event)" skinClass="skins.TextInputSkin" prompt="This is title for the action"/>
                                   
									 </s:FormItem> 
										<s:FormItem  skinClass="skins.FormItemSkin" width="100%">
										
										
											<s:Label text="Configuration(View):View Selection" width="100%" direction="rtl"/>
											<s:TextArea id="viewSelection"
											text="{this.viewObject.viewCodeFormula}" width="100%" minWidth="156" editable="true" selectable="true"
											prompt="View Selection"
											change="viewFormula_changeHandler(event)"
											/>
										
											
										
										</s:FormItem> 
									<s:FormItem label="Show in menu" skinClass="skins.FormItemSkin">
										<s:CheckBox id="viewShowinmenu"
													selected="true"
													change="showinmenu_changeHandler(event)"/>
									</s:FormItem>	
									<s:FormItem label="Public access" skinClass="skins.FormItemSkin">
										<s:CheckBox id="viewPublicaccess"
													selected="true"
													change="publicaccess_changeHandler(event)"/>
									</s:FormItem>
									<s:FormItem label="Open collapsed" skinClass="skins.FormItemSkin">
										<s:CheckBox id="viewOpencollapsed"
													selected="true"
													change="opencollapsed_changeHandler(event)"/>
									</s:FormItem>

<fx:Script><![CDATA[
    import view.domino.viewEditor.object.ColumnObject;
	import view.domino.viewEditor.object.ViewObject;
    import view.suportClasses.events.PropertyEditorChangeEvent;
    import mx.events.FlexEvent;


    private var _viewObject:ViewObject;

    public function initializeViewProperty(vobj:ViewObject):void
    {
         if(vobj!=null){
            viewNameInput.text=vobj.viewName;
            viewSelection.text=vobj.viewCodeFormula;
            if(vobj.showinmenu=="true"){
                viewShowinmenu.selected=true
            }else{
                viewShowinmenu.selected=false
            }

            if(vobj.publicaccess=="true"){
                viewPublicaccess.selected=true
            }else{
                viewPublicaccess.selected=false

            }
             if(vobj.opencollapsed=="true"){
                viewOpencollapsed.selected=true
            }else{
                viewOpencollapsed.selected=false

            }

            this.viewObject=vobj;
        }
    }

    private function onCreationComplete(event:FlexEvent):void
    {
       
    }
    
    public function set viewObject(value:ViewObject):void
    {
        _viewObject = value;
    } 

    [Bindable]
    public function get viewObject():ViewObject
    {
        return this._viewObject;
    }

    private function viewNameInput_changeHandler(event:Event):void
	{
	}

    private var viewFormula:String = "";

	[Bindable("Changed")]
	private function viewFormula_changeHandler(event):void
	{
		
        if(viewObject!=null){
            viewObject.viewCodeFormula=viewSelection.text;
        }
	    this.dispatchEvent(new Event("viewPropertyChanged",true, true));
		
	}

    private function showinmenu_changeHandler(event:Event):void
	{
		
		if(viewObject!=null){
			if(viewShowinmenu.selected==true){
				viewObject.showinmenu="true";
			}else{
				viewObject.showinmenu="false";
			}
            this.dispatchEvent(new Event("viewPropertyChanged",true, true));
			
		}
	}


	//viewPublicaccess
	private function publicaccess_changeHandler(event:Event):void
	{
		
		if(viewObject!=null){
			if(viewPublicaccess.selected==true){
				viewObject.publicaccess="true";
			}else{
				viewObject.publicaccess="false";
			}
            this.dispatchEvent(new Event("viewPropertyChanged",true, true));
		}
	}

    //opencollapsed_changeHandler
	private function opencollapsed_changeHandler(event:Event):void
	{
		if(viewObject!=null){
			if(viewOpencollapsed.selected==true){
				viewObject.opencollapsed="true";
			}else{
				viewObject.opencollapsed="false";
			}
            this.dispatchEvent(new Event("viewPropertyChanged",true, true));
		}
	}


]]></fx:Script> 								
</s:VGroup>